# 8.2

## 8.2.1

```tsx
const addOrConcat = (
  a: number,
  b: number,
  c: "add" | "concat"
): number | string => {
  if (c === "add") {
    return a + b;
  } else {
    return "" + a + b;
  }
};

// stringìœ¼ë¡œ ë‹¨ì–¸í•œ ê²½ìš°
let myVal: string = addOrConcat(2, 2, "concat") as string;
console.log(myVal); // '22'

// numberë¡œ ë‹¨ì–¸í•œ ê²½ìš° - ì»´íŒŒì¼ ì˜¤ë¥˜ëŠ” ì—†ì§€ë§Œ numberê°€ ì•„ë‹Œ stringì„ ë°˜í™˜í•©ë‹ˆë‹¤.
let wrongVal: number = addOrConcat(3, 3, "concat") as number;
console.log(typeof wrongVal); // string
console.log(wrongVal); // '33'
console.log(wrongVal.toFixed(2));
// Error: wrongVal.toFixed is not a function
```

```tsx
const addOrConcat = (
  a: number,
  b: number,
  c: "add" | "concat"
): number | string => {
  if (c === "add") {
    return a + b;
  } else {
    return "" + a + b;
  }
};

let myVal = addOrConcat(2, 2, "concat");
if (typeof myVal === "string") {
  console.log(myVal); // '22'
}

let wrongVal = addOrConcat(3, 3, "concat");
if (typeof wrongVal === "number") {
  console.log(wrongVal.toFixed(2));
} else {
  console.log("wrongValì€ ìˆ«ìê°€ ì•„ë‹ˆë¼ ë¬¸ìì—´ì…ë‹ˆë‹¤.");
  console.log(wrongVal); // '33'
}
```

## 8.2.2

```tsx
function doSomething(x: string | number) {
  if (typeof x === "string") {
    // íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì´ ì¡°ê±´ë¬¸ ë¸”ë¡ ì•ˆì— ìˆëŠ” xì˜ íƒ€ì…ì„ ë¬¸ìì—´ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.
    console.log(x.toUpperCase()); // ì •ìƒ ì‘ë™!
    console.log(x.toFixed(1)); // Error: toFixedëŠ” stringì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.
  }
  x.toUpperCase(); // Error: xê°€ stringì´ë¼ëŠ” ë³´ì¥ì´ ì—†ìŠµë‹ˆë‹¤.
  x.toFixed(1); // Error: xê°€ numberë¼ëŠ” ë³´ì¥ì´ ì—†ìŠµë‹ˆë‹¤.
}
```

```tsx
function findArray(x: number[] | number): void {
  if (Array.isArray(x)) {
    // xê°€ number[]ì¼ ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    console.log("xëŠ” ìˆ«ìí˜• ë°°ì—´ì…ë‹ˆë‹¤.");
    for (const item of x) {
      console.log(item);
    }
  } else {
    // xê°€ numberì¼ ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    console.log("xëŠ” ìˆ«ìí˜• ì…ë‹ˆë‹¤.");
    console.log(x);
  }
}
```

```tsx
interface Shoes {
  size: number;
}

interface Muffler {
  length: number;
}

function itemSize(item: Shoes | Muffler): string {
  if ("length" in item) {
    // length í”„ë¡œí¼í‹°ë¥¼ ê°€ì§„ ê²½ìš°ì—ë§Œ ì‹¤í–‰
    return `ë¨¸í”ŒëŸ¬ì˜ ê¸¸ì´ëŠ” ${item.length}cm ì…ë‹ˆë‹¤!`;
  } else {
    return `ì‹ ë°œì˜ ì‚¬ì´ì¦ˆëŠ” ${item.size}mm ì…ë‹ˆë‹¤!`;
  }
}

const shoes: Shoes = { size: 230 };
const muffler: Muffler = { length: 180 };

console.log(itemSize(shoes)); // ì‹ ë°œì˜ ì‚¬ì´ì¦ˆëŠ” 230mm ì…ë‹ˆë‹¤!
console.log(itemSize(muffler)); // ë¨¸í”ŒëŸ¬ì˜ ê¸¸ì´ëŠ” 180cm ì…ë‹ˆë‹¤!
```

```tsx
class Book {
  read(): string {
    return "ì±…ì„ ì½ìŠµë‹ˆë‹¤!";
  }
}

class Food {
  eat(): string {
    return "ìŒì‹ì„ ë¨¹ìŠµë‹ˆë‹¤!";
  }
}

function action(x: Book | Food): string {
  if (x instanceof Book) {
    return x.read();
  } else {
    return x.eat();
  }
}

const myBook = new Book();
const myFood = new Food();

console.log(action(myBook)); // ì±…ì„ ì½ìŠµë‹ˆë‹¤!
console.log(action(myFood)); // ìŒì‹ì„ ë¨¹ìŠµë‹ˆë‹¤!
```

```tsx
type Feeling = "happy" | "angry" | "sad";

function modeStatus(feeling: Feeling) {
  switch (feeling) {
    case "happy":
      console.log("ë‚˜ëŠ” í–‰ë³µí•´ğŸ¥°");
      break;
    case "angry":
      console.log("ë‚˜ëŠ” í™”ë‚¬ì–´ğŸ˜¡");
      break;
    case "sad":
      console.log("ë‚˜ëŠ” ìŠ¬í¼ğŸ˜¢");
      break;
    default:
      console.log("happy, angry, sad ì¤‘ í•œ ê°€ì§€ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”!");
  }
}
```

```tsx
type A = number | null | undefined;

function whatIsX(x: A): string {
  if (x === null) {
    // nullì„ ì‚¬ìš©í•œ íƒ€ì… ê°€ë“œ
    return "xëŠ” null ì…ë‹ˆë‹¤.";
  } else if (x === undefined) {
    // undefinedë¥¼ ì‚¬ìš©í•œ íƒ€ì… ê°€ë“œ
    return "xëŠ” undefined ì…ë‹ˆë‹¤.";
  } else {
    return `xëŠ” ${x} ì…ë‹ˆë‹¤.`;
  }
}

const numberX: A = 10;
const nullX: A = null;
const undefinedX: A = undefined;

console.log(whatIsX(numberX)); // xëŠ” 10 ì…ë‹ˆë‹¤.
console.log(whatIsX(nullX)); // xëŠ” null ì…ë‹ˆë‹¤.
console.log(whatIsX(undefinedX)); // xëŠ” undefined ì…ë‹ˆë‹¤.
```

```tsx
interface User {
  name: string | null;
  age: number;
}
```

```tsx
function hasNoName(user: User): user is User & { name: null } {
	//  is ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ íƒ€ì…ì„ ëª…ì‹œí•©ë‹ˆë‹¤
  return user.name === null;
}

const user: User = getUser();
// getUserëŠ” User íƒ€ì…ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.

if (hasNoName(user)) {
  console.log('ì´ë¦„ì´ ì…ë ¥ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤.');
} else {
  console.log(`ì‚¬ìš©ìì˜ ì´ë¦„ì€ ${user.name}ì…ë‹ˆë‹¤.`);
```

```tsx
type Admin = {
  name: string;
  kickCount: number;
};
type Member = {
  name: string;
  point: number;
};
type Guest = {
  name: string;
  visitCount: number;
};

// union type
type User = Admin | Member | Guest;
```

```tsx
function func(user: User) {
  // admin
  if ("kickCount" in user) {
    console.log(`${user.name}ë‹˜ ì§€ê¸ˆê¹Œì§€ ${user.kickCount}ëª… ë‚´ë³´ë‚´ì…¨ìŠµë‹ˆë‹¤.`);
    // member
  } else if ("point" in user) {
    console.log(`${user.name}ë‹˜ ì§€ê¸ˆê¹Œì§€ ${user.point}í¬ì¸íŠ¸ë¥¼ ëª¨ìœ¼ì…¨ìŠµë‹ˆë‹¤.`);
    // guest
  } else {
    console.log(`${user.name}ë‹˜ ì§€ê¸ˆê¹Œì§€ ${user.visitCount}ë²ˆ ë°©ë¬¸í•˜ì…¨ìŠµë‹ˆë‹¤.`);
  }
}
```

```tsx
// tagê°€ ADMINì´ë©´ì„œ ë™ì‹œì— MEMBERì¸ ê²½ìš°ëŠ” ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤.
// ì¦‰, êµì§‘í•©ì´ ì—†ì´ ì„œë¡œì†Œ ê´€ê³„ì´ë‹¤.

type Admin = {
  tag: "ADMIN";
  name: string;
  kickCount: number;
};
type Member = {
  tag: "MEMBER";
  name: string;
  point: number;
};
type Guest = {
  tag: "GUEST";
  name: string;
  visitCount: number;
};

type User = Admin | Member | Guest;

function func(user: User) {
  // admin
  if (user.tag === "ADMIN") {
    console.log(`${user.name}ë‹˜ ì§€ê¸ˆê¹Œì§€ ${user.kickCount}ëª… ë‚´ë³´ë‚´ì…¨ìŠµë‹ˆë‹¤.`);
    // member
  } else if (user.tag === "MEMBER") {
    console.log(`${user.name}ë‹˜ ì§€ê¸ˆê¹Œì§€ ${user.point}í¬ì¸íŠ¸ë¥¼ ëª¨ìœ¼ì…¨ìŠµë‹ˆë‹¤.`);
    // guest
  } else {
    console.log(`${user.name}ë‹˜ ì§€ê¸ˆê¹Œì§€ ${user.visitCount}ë²ˆ ë°©ë¬¸í•˜ì…¨ìŠµë‹ˆë‹¤.`);
  }
}
```

